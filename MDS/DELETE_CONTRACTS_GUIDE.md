# ุฏููู ุญุฐู ุงูุนููุฏ

## โ๏ธ ููู ุฌุฏุงู: ุทุจู SQL ุฃููุงู!

ูุจู ุฃู ุชุนูู ุฃุฒุฑุงุฑ ุงูุญุฐูุ ูุฌุจ ุชุทุจูู SQL:

```sql
-- ูู Supabase SQL Editor
-- ุงูุณุฎ ูุงูุตู: scripts/26-fix-all-issues.sql
-- ุฃู: scripts/25-contract-deletion-requests.sql
-- ุงุถุบุท Run
```

---

## ๐ฏ ููู ูุนูู ูุธุงู ุงูุญุฐู:

### **ููุดุฑูู (Affiliate)**:
```
1. ููุชุญ ุงูุนูุฏ: /affiliate/contracts/[id]
2. ูุถุบุท "ุทูุจ ุญุฐู ุงูุนูุฏ" (ุฒุฑ ุฃุญูุฑ ูู ุงูุฃุนูู)
3. ููุชุจ ุงูุณุจุจ (ุฅุฌุจุงุฑู)
4. ูุฑุณู ุงูุทูุจ
5. ููุชุธุฑ ููุงููุฉ ุงูุฃุฏูู
```

**ุงูุญุงูุงุช**:
- โ **ุฒุฑ "ุทูุจ ุญุฐู ุงูุนูุฏ"** - ุฅุฐุง ูุง ููุฌุฏ ุทูุจ ูุนูู
- โณ **ุฒุฑ "ุทูุจ ุญุฐู ูุนูู"** - ุฅุฐุง ููุฌุฏ ุทูุจ ูุนูู (disabled)

---

### **ููุฃุฏูู (Admin)**:

#### **ุทุฑููุฉ 1: ุญุฐู ูุจุงุดุฑ**
```
1. ููุชุญ ุงูุนูุฏ: /admin/contracts/[id]
2. ูุถุบุท "ุญุฐู ุงูุนูุฏ" (ุฒุฑ ุฃุญูุฑ ูู ุงูุฃุนูู ูููู)
3. ููุชุจ ุงูุณุจุจ
4. ูุญุฐู ูุจุงุดุฑุฉ โ
```

#### **ุทุฑููุฉ 2: ูุฑุงุฌุนุฉ ุทูุจุงุช ุงูุญุฐู**
```
1. ููุชุญ: /admin/deletion-requests
2. ูุดูู ูุงุฆูุฉ ุงูุทูุจุงุช ุงููุนููุฉ
3. ูุถุบุท "ุงูููุงููุฉ" ุฃู "ุงูุฑูุถ"
4. ููุชุจ ููุงุญุธุงุช (ุงุฎุชูุงุฑู ููููุงููุฉุ ุฅุฌุจุงุฑู ููุฑูุถ)
5. ูุคูุฏ ุงููุฑุงุฑ
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### **ุงููุดููุฉ: ุงูุฒุฑ ุบูุฑ ููุฌูุฏ**
```
โ ุงูุญู: ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ
npm run dev
```

### **ุงููุดููุฉ: ุฎุทุฃ ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ**
```
Error: relation "contract_deletion_requests" does not exist
```
**โ ุงูุญู**: ูู ูุชู ุชุทุจูู SQL ุจุนุฏ!
```sql
-- ุทุจู: scripts/26-fix-all-issues.sql
```

### **ุงููุดููุฉ: "ุบูุฑ ูุตุฑุญ"**
```
โ ุงูุญู: ุชุฃูุฏ ูู role ุงููุณุชุฎุฏู
-- ูู Supabase SQL Editor:
SELECT id, email, role FROM users WHERE email = 'your@email.com';
-- ูุฌุจ ุฃู ูููู role = 'admin' ุฃู 'affiliate'
```

---

## ๐ ููุงูุน ุงูุฃุฒุฑุงุฑ:

### **ููุดุฑูู**:
```
/affiliate/contracts/[id]
โ
ูู ุงูุฃุนูู ูููู (ุจุฌุงูุจ "ุงูุนูุฏุฉ ููุนููุฏ")
โ
ุฒุฑ ุฃุญูุฑ: "ุทูุจ ุญุฐู ุงูุนูุฏ" ๐๏ธ
```

### **ููุฃุฏูู**:
```
/admin/contracts/[id]
โ
ูู ุงูุฃุนูู ูุณุงุฑ (ููุงุจู "ุงูุนูุฏุฉ ููุนููุฏ")
โ
ุฒุฑ ุฃุญูุฑ: "ุญุฐู ุงูุนูุฏ" ๐๏ธ
```

---

## ๐จ UI Components:

### **DeleteContractButton (ููุดุฑูู)**:
```typescript
<DeleteContractButton
  contractId={contract.id}
  contractNumber={contract.contract_number}
  hasPendingRequest={deletionRequest?.status === "pending"}
/>
```

### **DeleteContractButton (ููุฃุฏูู)**:
```typescript
<DeleteContractButton
  contractId={contract.id}
  contractNumber={contract.contract_number}
/>
```

---

## ๐ง ุงูุฅุดุนุงุฑุงุช:

### **ุนูุฏ ุทูุจ ุญุฐู ูู ุดุฑูู**:
```
๐ง ุฅูู: ุฌููุน ุงูุฃุฏูู
๐ ุงูุนููุงู: โ๏ธ ุทูุจ ุญุฐู ุนูุฏ
๐ฌ ุงููุญุชูู: ุชูุงุตูู ุงูุนูุฏ ูุงูุณุจุจ
๐ ุฑุงุจุท: /admin/deletion-requests
```

### **ุนูุฏ ููุงููุฉ ุงูุฃุฏูู**:
```
๐ง ุฅูู: ุงูุดุฑูู
๐ ุงูุนููุงู: โ ุชูุช ุงูููุงููุฉ ุนูู ุญุฐู ุงูุนูุฏ
๐ฌ ุงููุญุชูู: ุชู ุญุฐู ุงูุนูุฏ + ููุงุญุธุงุช
```

### **ุนูุฏ ุฑูุถ ุงูุฃุฏูู**:
```
๐ง ุฅูู: ุงูุดุฑูู
๐ ุงูุนููุงู: โ ุชู ุฑูุถ ุทูุจ ุญุฐู ุงูุนูุฏ
๐ฌ ุงููุญุชูู: ุณุจุจ ุงูุฑูุถ
```

### **ุนูุฏ ุญุฐู ูุจุงุดุฑ ูู ุงูุฃุฏูู**:
```
๐ง ุฅูู: ุงูุดุฑูู (ุฅู ูุฌุฏ)
๐ ุงูุนููุงู: ๐๏ธ ุชู ุญุฐู ุนูุฏ
๐ฌ ุงููุญุชูู: ุชู ุญุฐู ุงูุนูุฏ ูู ูุจู ุงููุณุคูู + ุงูุณุจุจ
```

---

## โ ุงูุชุญูู ูู ุงูุชุซุจูุช:

### **1. ุชุญูู ูู SQL**:
```sql
-- ูู Supabase SQL Editor
SELECT COUNT(*) FROM contract_deletion_requests;
-- ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฎุทุฃ โ
```

### **2. ุชุญูู ูู ุงูุฃุฒุฑุงุฑ**:
```
โ ุงูุชุญ /affiliate/contracts/[id] - ูุฌุจ ุฃู ุชุฑู ุฒุฑ "ุทูุจ ุญุฐู ุงูุนูุฏ"
โ ุงูุชุญ /admin/contracts/[id] - ูุฌุจ ุฃู ุชุฑู ุฒุฑ "ุญุฐู ุงูุนูุฏ"
โ ุงูุชุญ /admin/deletion-requests - ูุฌุจ ุฃู ุชูุชุญ ุงูุตูุญุฉ
```

### **3. ุงุฎุชุจุฑ ุงููุธููุฉ**:
```
1. ุณุฌู ุฏุฎูู ูุดุฑูู
2. ุงูุชุญ ุนูุฏ
3. ุงุถุบุท "ุทูุจ ุญุฐู ุงูุนูุฏ"
4. ุงูุชุจ ุณุจุจ
5. ุฃุฑุณู โ

6. ุณุฌู ุฏุฎูู ูุฃุฏูู
7. ุงูุชุญ /admin/deletion-requests
8. ูุฌุจ ุฃู ุชุฑู ุงูุทูุจ โ
9. ูุงูู ุฃู ุงุฑูุถ โ
```

---

## ๐ ุงูุตูุงุญูุงุช:

### **ุงูุดุฑูู ููุฏุฑ**:
- โ ุทูุจ ุญุฐู ุนูุฏ (ูุญุชุงุฌ ููุงููุฉ)
- โ ุญุฐู ูุจุงุดุฑ (ููููุน)

### **ุงูุฃุฏูู ููุฏุฑ**:
- โ ุญุฐู ุฃู ุนูุฏ ูุจุงุดุฑุฉ (ุจุฏูู ููุงููุฉ)
- โ ูุฑุงุฌุนุฉ ุทูุจุงุช ุงูุญุฐู
- โ ุงูููุงููุฉ ุฃู ุงูุฑูุถ

---

**ุทุจู SQL ูุฌุฑุจ! ๐**
