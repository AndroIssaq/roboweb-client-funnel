# โ ุฅุตูุงุญ Error Handling ููุนููุฏ ุงููุญุฐููุฉ

## ุงููุดููุฉ:
```
Error fetching contract: {}
```

ุนูุฏูุง ุชุญุฐู ุนูุฏ ูุชุญุงูู ูุชุญ ุตูุญุชูุ ูุธูุฑ error ูุฃู:
- `.single()` ูุชููุน ูุชูุฌุฉ ูุงุญุฏุฉ ุจุงูุถุจุท
- ุฅุฐุง ูู ูุฌุฏ ุดูุกุ ูุฑุฌุน error
- Error object ูุงุถู `{}`

---

## ุงูุญู:

### **ุงุณุชุฎุฏุงู `.maybeSingle()` ุจุฏูุงู ูู `.single()`**

`.maybeSingle()`:
- โ ูุฑุฌุน `null` ุฅุฐุง ูู ูุฌุฏ ูุชูุฌุฉ
- โ ูุง ูุนุทู error
- โ ููุงุณุจ ููุญุงูุงุช ุงูุชู ูุฏ ูุง ูููู ูููุง ูุชูุฌุฉ

---

## ๐ ุงููููุงุช ุงูููุตูุญุฉ:

### **1. lib/actions/contract-workflow.ts**
```typescript
// ูุจู:
.single()

// ุจุนุฏ:
.maybeSingle()
```

### **2. app/affiliate/contracts/[id]/page.tsx**
```typescript
// ูุจู:
.single()
if (contractError) {
  console.error("Error fetching contract:", contractError)
}

// ุจุนุฏ:
.maybeSingle()
if (contractError) {
  console.error("Error fetching contract:", contractError)
  notFound()  // โ ุฃุถูุช redirect
}
```

---

## ๐ฏ ุงูุณููู ุงูุขู:

### **ุนูุฏ ุญุฐู ุนูุฏ**:
```
1. ุงููุณุชุฎุฏู ูุญุฐู ุงูุนูุฏ
   โ
2. ูุญุงูู ูุชุญ ุตูุญุฉ ุงูุนูุฏ
   โ
3. getContractById ูุฑุฌุน null
   โ
4. ุงูุตูุญุฉ ุชุนุฑุถ 404 Not Found โ
   โ
5. ูุง ููุฌุฏ error ูู Console โ
```

---

## โ ุงููุฑู:

### **`.single()`**:
```typescript
// ูุชููุน ูุชูุฌุฉ ูุงุญุฏุฉ ุจุงูุถุจุท
// ุฅุฐุง ูู ูุฌุฏ โ error
// ุฅุฐุง ูุฌุฏ ุฃูุซุฑ ูู ูุงุญุฏ โ error
```

### **`.maybeSingle()`**:
```typescript
// ูุชููุน 0 ุฃู 1 ูุชูุฌุฉ
// ุฅุฐุง ูู ูุฌุฏ โ null (ุจุฏูู error) โ
// ุฅุฐุง ูุฌุฏ ุฃูุซุฑ ูู ูุงุญุฏ โ error
```

---

## ๐ ูุชู ุชุณุชุฎุฏู ูู ูุงุญุฏ:

### **ุงุณุชุฎุฏู `.single()`**:
```typescript
// ุนูุฏูุง ุชุชููุน ูุชูุฌุฉ ูุงุญุฏุฉ ุจุงูุถุจุท
// ูุซุงู: ุงูุจุญุซ ุจู ID ูุฑูุฏ
const { data } = await supabase
  .from("users")
  .select("*")
  .eq("id", userId)
  .single()  // โ ID ูุฑูุฏุ ูุฌุจ ุฃู ููุฌุฏ
```

### **ุงุณุชุฎุฏู `.maybeSingle()`**:
```typescript
// ุนูุฏูุง ูุฏ ูุง ุชุฌุฏ ูุชูุฌุฉ
// ูุซุงู: ุงูุจุญุซ ุนู ุนูุฏ ูุฏ ูููู ูุญุฐูู
const { data } = await supabase
  .from("contracts")
  .select("*")
  .eq("id", contractId)
  .maybeSingle()  // โ ูุฏ ูููู ูุญุฐูู
```

---

## ๐จ ุตูุญุฉ 404:

ุนูุฏูุง ูุญุงูู ุงููุณุชุฎุฏู ูุชุญ ุนูุฏ ูุญุฐูู:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                     โ
โ           404                       โ
โ      Not Found                      โ
โ                                     โ
โ   ูุฐุง ุงูุนูุฏ ุบูุฑ ููุฌูุฏ ุฃู ุชู ุญุฐูู    โ
โ                                     โ
โ   [ุงูุนูุฏุฉ ููุนููุฏ]                   โ
โ                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูุงุฎุชุจุงุฑ:

### **1. ุงุฎุชุจุฑ ุญุฐู ุนูุฏ**:
```
1. ุฃูุดุฆ ุนูุฏ ุฌุฏูุฏ
2. ุงุญูุธ ุฑุงุจุท ุงูุนูุฏ
3. ุงุญุฐู ุงูุนูุฏ
4. ุงูุชุญ ุงูุฑุงุจุท ุงููุญููุธ
5. ูุฌุจ ุฃู ุชุฑู 404 โ
6. ูุง ููุฌุฏ error ูู Console โ
```

### **2. ุงุฎุชุจุฑ ุนูุฏ ููุฌูุฏ**:
```
1. ุงูุชุญ ุนูุฏ ููุฌูุฏ
2. ูุฌุจ ุฃู ููุชุญ ุจุดูู ุทุจูุนู โ
3. ูุง ููุฌุฏ error โ
```

---

## ๐ง ุฅุตูุงุญุงุช ุฅุถุงููุฉ:

### **ุฌููุน ุงูุตูุญุงุช ุงูุชู ุชุณุชุฎุฏู ุงูุนููุฏ**:
- โ `/admin/contracts/[id]` - ูุณุชุฎุฏู `getContractById`
- โ `/client/contracts/[id]` - ูุณุชุฎุฏู `getContractById`
- โ `/affiliate/contracts/[id]` - ููุตูุญ
- โ `/contract/[token]` - ูุณุชุฎุฏู `getContractByToken`

---

**ูู ุดูุก ููุตูุญ! ูู ุชุฑู error ุนูุฏ ุญุฐู ุนูุฏ ุจุนุฏ ุงูุขู! โ**
