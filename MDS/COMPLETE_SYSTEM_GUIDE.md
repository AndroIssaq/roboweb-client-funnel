# ๐ฏ ุฏููู ุงููุธุงู ุงููุงูู - ุงูุฅุดุนุงุฑุงุช ูุงูุชูููุน ุงูุขูู

## โ ูุง ุชู ุฅูุฌุงุฒู:

### **1. ุตูุญุฉ ุฅุดุนุงุฑุงุช ููุดุฑูู** โ
- `/affiliate/notifications` - ุตูุญุฉ ูุงููุฉ ููุฅุดุนุงุฑุงุช
- Realtime updates ุจุงุณุชุฎุฏุงู Supabase
- ุชุญุฏูุฏ ูููุฑูุก / ุญุฐู
- ุฃููููุงุช ููููุฉ ุญุณุจ ููุน ุงูุฅุดุนุงุฑ

### **2. ูุธุงู Affiliate Tracking** โ
- ุชุชุจุน ุงูุฒูุงุฑ ูู ุฑุงุจุท ุงูุดุฑูู
- Cookie ููุฏุฉ 30 ููู
- ุฅุดุนุงุฑ ููุดุฑูู ุนูุฏ ุฏุฎูู ุฒุงุฆุฑ
- ุฅุดุนุงุฑ ุนูุฏ ุฅูุดุงุก ุนูุฏ ูู ุงูุฅุญุงูุฉ

### **3. ูุธุงู ุชูููุน ุขูู** โ
- ุงูุดุฑูู ูุดูู ุงูุชูููุนุงุช ููุท (read-only)
- ูุง ููุฏุฑ ูููุน ููุงู ุงูุฃุฏูู ุฃู ุงูุนููู
- ุฑุณุงุฆู ูุงุถุญุฉ: "ุณูุชู ุงูุชูููุน ูู ูุจู..."

### **4. ุฅุดุนุงุฑุงุช Realtime** โ
- ุฅุดุนุงุฑ ููุนููู ุนูุฏ ุฅูุดุงุก ุนูุฏ
- ุฅุดุนุงุฑ ููุฃุฏูู ุนูุฏ ุฅูุดุงุก ุนูุฏ
- ุฅุดุนุงุฑ ููุดุฑูู ุนูุฏ ุฅูุดุงุก ุนูุฏ ูู ุฅุญุงูุชู
- ุฅุดุนุงุฑ ููุฌููุน ุนูุฏ ุงูุชูุงู ุงูุชูููุนุงุช

### **5. Workflow ุงูุชูููุน** โ
```
1. ุงูุดุฑูู/ุงูุฃุฏูู ููุดุฆ ุนูุฏ
   โ
2. ุฅุดุนุงุฑ ููุนููู + ููุฃุฏูู + ููุดุฑูู (ุฅู ูุฌุฏ)
   โ
3. ุงูุฃุฏูู ูููุน
   โ
4. ุฅุดุนุงุฑ ููุนููู "ุฌุงูุฒ ููุชูููุน"
   โ
5. ุงูุนููู ูููุน
   โ
6. ุชุญููู ุชููุงุฆู ูู PDF
   โ
7. ุฅุดุนุงุฑ ููุฌููุน "ุงูุนูุฏ ููุชูู" ๐
```

### **6. ุฒุฑ ุชุญููู PDF** โ
- ููุฌูุฏ ูู `ContractViewer`
- ูุนูู ูุฌููุน ุงูุฃุฏูุงุฑ (admin, client, affiliate)
- ูุธูุฑ ุจุนุฏ ุงูุชูููุนูู

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ:

### **1. app/affiliate/notifications/page.tsx**
```typescript
// ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช ููุดุฑูู
export default async function AffiliateNotificationsPage()
```

### **2. components/affiliate/affiliate-notifications-list.tsx**
```typescript
// Component ุงูุฅุดุนุงุฑุงุช ูุน Realtime
export function AffiliateNotificationsList({ userId })
```

### **3. lib/actions/affiliate-tracking.ts**
```typescript
// ุชุชุจุน ุงูุฅุญุงูุงุช
export async function trackAffiliateReferral(affiliateCode)
export async function getAffiliateFromCookie()
export async function notifyAffiliateOnContractCreation(...)
```

---

## ๐ ุงููููุงุช ุงูููุญุฏุซุฉ:

### **1. components/contracts/contract-viewer.tsx**
- ุฃุถูุช `userRole: "affiliate"` ููู interface
- ุฃุถูุช ุฑุณุงุฆู read-only ููุดุฑูู
- ุงูุดุฑูู ูุดูู ุงูุชูููุนุงุช ุจุณ ูุง ููุฏุฑ ูููุน

### **2. lib/actions/contracts.ts**
- ุฅุดุนุงุฑ ููุนููู ุนูุฏ ุฅูุดุงุก ุนูุฏ
- ุฅุดุนุงุฑ ููุดุฑูู ุนูุฏ ุฅูุดุงุก ุนูุฏ ูู ุฅุญุงูุชู
- Email ููุนููู ูุน ุฑุงุจุท ุงูุนูุฏ

### **3. lib/actions/contract-workflow.ts**
- ุชุญููู ุชููุงุฆู ูู PDF ุจุนุฏ ุงูุชูููุนูู
- ุฅุดุนุงุฑ ููุดุฑูู ุนูุฏ ุงูุชูุงู ุงูุนูุฏ
- Revalidate paths ููุฌููุน

---

## ๐ฏ ููู ูุนูู ุงููุธุงู:

### **ุณููุงุฑูู 1: ุนููู ูุฏุฎู ูู ุฑุงุจุท ุดุฑูู**
```
1. ุงูุนููู ูุถุบุท ุนูู ุฑุงุจุท: /signup?ref=ABC123
   โ
2. trackAffiliateReferral("ABC123")
   โ
3. Cookie ูุชุญูุธ ููุฏุฉ 30 ููู
   โ
4. ุฅุดุนุงุฑ ููุดุฑูู: "๐ฏ ุฒุงุฆุฑ ุฌุฏูุฏ ูู ุฑุงุจุทู"
   โ
5. ููุง ุงูุนููู ูุนูู ุนูุฏ:
   - ุฅุดุนุงุฑ ููุดุฑูู: "๐ ุนูุฏ ุฌุฏูุฏ ูู ุฅุญุงูุชู!"
```

### **ุณููุงุฑูู 2: ุฅูุดุงุก ุนูุฏ ุฌุฏูุฏ**
```
ุงูุฃุฏูู/ุงูุดุฑูู ููุดุฆ ุนูุฏ
โ
ุฅุดุนุงุฑุงุช ุชูุฑุณู:
โโ ููุนููู: "๐ ุนูุฏ ุฌุฏูุฏ ุจุงูุชุธุงุฑ ุชูููุนู"
โโ ููุฃุฏูู: "ุนูุฏ ุฌุฏูุฏ ุชู ุฅูุดุงุคู"
โโ ููุดุฑูู (ุฅู ูุฌุฏ): "๐ ุนูุฏ ุฌุฏูุฏ ูู ุฅุญุงูุชู!"

Emails ุชูุฑุณู:
โโ ููุนููู: ุฑุงุจุท ุงูุนูุฏ
โโ ููุดุฑูู: ุชูุงุตูู ุงูุนูุฏ
```

### **ุณููุงุฑูู 3: ุงูุชูููุน ุนูู ุงูุนูุฏ**
```
ุงูุฃุฏูู ูููุน
โ
ุฅุดุนุงุฑ ููุนููู: "ุนูุฏู ุฌุงูุฒ ููุชูููุน"
โ
ุงูุนููู ูููุน
โ
ุชุญููู ุชููุงุฆู ูู PDF
โ
ุฅุดุนุงุฑุงุช ููุฌููุน:
โโ ููุฃุฏูู: "๐ ุนูุฏ ุชู ุชูููุนู ุจุงููุงูู"
โโ ููุนููู: "ุชู ุงูุชูููุน ุจูุฌุงุญ"
โโ ููุดุฑูู: "๐ ุนูุฏ ููุชูู ูู ุฅุญุงูุชู!"
```

---

## ๐ ุงูุฃูุงู:

### **ุงูุดุฑูู**:
- โ ูุดูู ุงูุนูุฏ ูุงูู
- โ ูุดูู ุงูุชูููุนุงุช
- โ ูุง ููุฏุฑ ูููุน
- โ ูุง ููุฏุฑ ูุนุฏู

### **ุงูุนููู**:
- โ ูุดูู ุนูุฏู ููุท
- โ ูููุน ุนูุฏู
- โ ูุง ููุฏุฑ ูุดูู ุชูููุน ุงูุฃุฏูู ูุจู ูุง ุงูุฃุฏูู ูููุน

### **ุงูุฃุฏูู**:
- โ ูุดูู ูู ุงูุนููุฏ
- โ ูููุน ุฃู ุนูุฏ
- โ ูุญุฐู ุฃู ุนูุฏ
- โ ูุฑุงุฌุน ุทูุจุงุช ุงูุญุฐู

---

## ๐ง ุฃููุงุน ุงูุฅุดุนุงุฑุงุช:

### **1. contract** (ุนูุฏ)
- ุฃููููุฉ: ๐ FileText (ุฃุฒุฑู)
- ูุซุงู: "ุนูุฏ ุฌุฏูุฏ ุจุงูุชุธุงุฑ ุชูููุนู"

### **2. referral** (ุฅุญุงูุฉ)
- ุฃููููุฉ: ๐ฅ UserPlus (ุฃุฎุถุฑ)
- ูุซุงู: "ุฒุงุฆุฑ ุฌุฏูุฏ ูู ุฑุงุจุทู"

### **3. deletion** (ุญุฐู)
- ุฃููููุฉ: โ๏ธ AlertCircle (ุฃุญูุฑ)
- ูุซุงู: "ุชู ุญุฐู ุนูุฏ"

---

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ:

### **1. ุชุทุจูู SQL**:
```sql
-- ูู Supabase SQL Editor
-- scripts/26-fix-all-issues.sql
```

### **2. ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**:
```env
NEXT_PUBLIC_APP_URL=https://yourdomain.com
RESEND_API_KEY=re_xxxxx
RESEND_FROM_EMAIL=noreply@yourdomain.com
```

### **3. ุชูุนูู Realtime ูู Supabase**:
```sql
-- ูู Supabase Dashboard โ Database โ Replication
-- ูุนูู Realtime ููุฌุฏูู: notifications
```

### **4. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ**:
```bash
npm run dev
```

---

## โ ุงูุงุฎุชุจุงุฑ:

### **1. ุงุฎุชุจุฑ ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช**:
```
1. ุณุฌู ุฏุฎูู ูุดุฑูู
2. ุงูุชุญ /affiliate/notifications
3. ูุฌุจ ุฃู ุชูุชุญ ุงูุตูุญุฉ โ
```

### **2. ุงุฎุชุจุฑ Affiliate Tracking**:
```
1. ุงุญุตู ุนูู ุฑุงุจุท ุงูุดุฑูู
2. ุงูุชุญ ูู ูุชุตูุญ ุฎุงุต: /signup?ref=CODE
3. ุณุฌู ุฏุฎูู ูุดุฑูู
4. ุงูุชุญ /affiliate/notifications
5. ูุฌุจ ุฃู ุชุฑู ุฅุดุนุงุฑ "ุฒุงุฆุฑ ุฌุฏูุฏ" โ
```

### **3. ุงุฎุชุจุฑ ุงูุชูููุน**:
```
1. ุฃูุดุฆ ุนูุฏ ุฌุฏูุฏ
2. ุณุฌู ุฏุฎูู ูุฃุฏูู โ ููุน
3. ุณุฌู ุฏุฎูู ูุนููู โ ููุน
4. ุงูุชุญ ุงูุนูุฏ
5. ูุฌุจ ุฃู ุชุฑู "ุงูุนูุฏ ููุชูู" โ
6. ุงุถุบุท "ุชุญููู PDF" โ
```

### **4. ุงุฎุชุจุฑ ุงูุฅุดุนุงุฑุงุช Realtime**:
```
1. ุงูุชุญ /affiliate/notifications ูู ุชุงุจ
2. ูู ุชุงุจ ุขุฎุฑ: ุฃูุดุฆ ุนูุฏ
3. ุงุฑุฌุน ููุชุงุจ ุงูุฃูู
4. ูุฌุจ ุฃู ูุธูุฑ ุงูุฅุดุนุงุฑ ุชููุงุฆูุงู โ
```

---

## ๐จ UI Components:

### **ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ุงูุฅุดุนุงุฑุงุช                            โ
โ                                         โ
โ [3 ุบูุฑ ููุฑูุก] [ุชุญุฏูุฏ ุงููู ูููุฑูุก]      โ
โ                                         โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ โ ๐ ุนูุฏ ุฌุฏูุฏ ุจุงูุชุธุงุฑ ุชูููุนู      โ    โ
โ โ ุชู ุฅูุดุงุก ุนูุฏ ุฑูู RW-2024-001    โ    โ
โ โ [ุนุฑุถ] [โ] [๐๏ธ]                  โ    โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                         โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ โ ๐ฅ ุฒุงุฆุฑ ุฌุฏูุฏ ูู ุฑุงุจุทู           โ    โ
โ โ ูุงู ุดุฎุต ุจุงูุฏุฎูู ูู ุฑุงุจุทู        โ    โ
โ โ [ุนุฑุถ] [โ] [๐๏ธ]                  โ    โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ContractViewer ููุดุฑูู**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชูููุน Roboweb                           โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ โ [ุตูุฑุฉ ุงูุชูููุน]                   โ    โ
โ โ โ ุชู ุงูุชูููุน                     โ    โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ [ุณูุชู ุงูุชูููุน ูู ูุจู ุงููุณุคูู]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชูููุน ุงูุนููู                            โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ โ โณ ูู ุงูุชุธุงุฑ ุงูุชูููุน             โ    โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ [ุณูุชู ุงูุชูููุน ูู ูุจู ุงูุนููู]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### **ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑ**
```
โ ุชุญูู ูู SQL ุชู ุชุทุจููู
โ ุชุญูู ูู Realtime ููุนูู ูู Supabase
โ ุชุญูู ูู Console ููุฃุฎุทุงุก
```

### **ุงููุดููุฉ: Emails ูุง ุชูุฑุณู**
```
โ ุชุญูู ูู RESEND_API_KEY
โ ุชุญูู ูู RESEND_FROM_EMAIL
โ ุชุญูู ูู Resend Dashboard ููุฃุฎุทุงุก
```

### **ุงููุดููุฉ: PDF ูุง ูุชุญูู**
```
โ ุชุญูู ูู ุงูุชูููุนูู ููุฌูุฏูู
โ ุชุญูู ูู Console ููุฃุฎุทุงุก
โ ุชุญูู ูู lib/pdf/contract-template.ts
```

---

**ุงููุธุงู ุฌุงูุฒ! ๐**
