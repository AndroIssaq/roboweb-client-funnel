# ๐ง ุฅุตูุงุญ ุดุงูู ููุดุงูู RLS

## ุงููุดููุฉ ุงูุญุงููุฉ
ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ:
```
Cannot coerce the result to a single JSON object
The result contains 0 rows
```

## ุงูุณุจุจ
1. โ Infinite recursion ูู RLS policies ุนูู ุฌุฏูู `users`
2. โ ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `clients`

## ุงูุญู ุงููุงูู โ

### ุฎุทูุฉ ูุงุญุฏุฉ ููุท - ุทุจู ูุฐุง ุงูููู:

**`scripts/09-complete-rls-fix.sql`**

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### 1๏ธโฃ ุงูุชุญ Supabase Dashboard
https://supabase.com/dashboard

### 2๏ธโฃ ุงุฎุชุฑ ูุดุฑูุนู

### 3๏ธโฃ ุงูุชุญ SQL Editor
ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ โ **SQL Editor**

### 4๏ธโฃ ุฃูุดุฆ ุงุณุชุนูุงู ุฌุฏูุฏ
ุงุถุบุท **New Query**

### 5๏ธโฃ ุงูุณุฎ ูุงูุตู ุงูููุฏ
ุงูุชุญ ููู `scripts/09-complete-rls-fix.sql` ูุงูุณุฎ **ูู** ูุญุชููุงุชู

### 6๏ธโฃ ุดุบู ุงูุงุณุชุนูุงู
ุงุถุบุท **Run** ุฃู ุงุถุบุท **F5**

### 7๏ธโฃ ุงูุชุธุฑ ุงูุงูุชูุงุก
ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ "Success. No rows returned"

---

## โ ุจุนุฏ ุงูุชุทุจูู

1. **ุฃุนุฏ ุชุญููู** ุตูุญุฉ ุงูุชุทุจูู (Ctrl+Shift+R)
2. **ุณุฌู ุฏุฎูู** ูุฑุฉ ุฃุฎุฑู
3. **ูุฌุจ ุฃู ูุนูู** ูู ุดูุก ุจุฏูู ุฃุฎุทุงุก!

---

## ๐ฏ ูุง ููุนูู ูุฐุง ุงูุฅุตูุงุญ

### ูุญู ูุดููุฉ Infinite Recursion
- โ ููุดุฆ function ุงุณููุง `is_admin()` ุชุชุฌุงูุฒ RLS ุจุดูู ุขูู
- โ ูุณุชุจุฏู ุฌููุน ุงูุณูุงุณุงุช ุงููุฏููุฉ ุจุณูุงุณุงุช ุฌุฏูุฏุฉ ุขููุฉ

### ูุณูุญ ูููุณุชุฎุฏููู ุจุฅูุดุงุก ุณุฌูุงุชูู
- โ ูุณูุญ ูููุณุชุฎุฏู ุจุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `clients` ุชููุงุฆูุงู
- โ ูุญุฏุซ ุงูุณูุงุณุงุช ุนูู ุฌููุน ุงูุฌุฏุงูู ูุงุณุชุฎุฏุงู `is_admin()`

---

## โ๏ธ ููู ุฌุฏุงู

**ูุง ุชูุณู ุชุทุจูู ุงูููู!** 

ุงูููุฏ ุงูุญุงูู ูุนุฏู ููุนูู ุจุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููู ูู ูุนูู ุจุดูู ูุงูู ุญุชู ุชุทุจู ูุฐุง ุงูุฅุตูุงุญ.

---

## ๐ ุฅุฐุง ูุงุฌูุช ูุดุงูู

ุชุฃูุฏ ูู:
1. โ ูุณุฎุช **ูู** ูุญุชูู ุงูููู
2. โ ุดุบูุช ุงูุงุณุชุนูุงู ูู **SQL Editor** ูููุณ ูู ููุงู ุขุฎุฑ
3. โ ุงูุชุธุฑุช ุญุชู ุงูุชูู ุงูุชูููุฐ
4. โ ุฃุนุฏุช ุชุญููู ุตูุญุฉ ุงูุชุทุจูู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชุญูู ูู console ูู ุงููุชุตูุญ (F12) ูุฃุฑุณู ุฑุณุงูุฉ ุงูุฎุทุฃ.
