# ูุธุงู ุฅุซุจุงุช ุงูุฏูุน ูุญูุงูุฉ ุญููู ุฌููุน ุงูุฃุทุฑุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุชูุงูู ูุถูุงู ุญููู ุฌููุน ุงูุฃุทุฑุงู ูู ุงูุนูุฏ:
- โ **ุญู ุงูุนููู**: ุฎุฏูุฉ ูุถูููุฉ ุจุนูุฏ ูุงูููู ููุฒู
- โ **ุญู ุงูุดุฑูุฉ**: ุฏูุน ูุซุจุช ูููุซู ูุจู ุจุฏุก ุงูุนูู
- โ **ุญู ุงูุดุฑูู**: ุนูููุฉ ูุถูููุฉ ููุญุณูุจุฉ ุชููุงุฆูุงู

---

## ๐๏ธ ุงูุชุนุฏููุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `contracts` - ุญููู ุฌุฏูุฏุฉ:

#### ุฅุซุจุงุช ุงูุฏูุน:
- `payment_proof_url` - ุฑุงุจุท ุตูุฑุฉ ุฅุซุจุงุช ุงูุฏูุน
- `payment_proof_uploaded_at` - ุชุงุฑูุฎ ุงูุฑูุน
- `payment_proof_verified` - ูู ุชู ุงูุชุญููุ
- `payment_proof_verified_by` - ุงููุณุคูู ุงูุฐู ุชุญูู
- `payment_proof_verified_at` - ุชุงุฑูุฎ ุงูุชุญูู
- `payment_proof_notes` - ููุงุญุธุงุช
- `payment_proof_method` - ุทุฑููุฉ ุงูุฏูุน (InstaPay/Vodafone Cash/ุจููู)

#### ุนูููุฉ ุงูุดุฑูู:
- `affiliate_commission_amount` - ูุจูุบ ุงูุนูููุฉ
- `affiliate_commission_percentage` - ูุณุจุฉ ุงูุนูููุฉ
- `affiliate_commission_paid` - ูู ุชู ุงูุฏูุนุ
- `affiliate_commission_paid_at` - ุชุงุฑูุฎ ุงูุฏูุน
- `affiliate_payment_proof_url` - ุฅุซุจุงุช ุฏูุน ุงูุนูููุฉ

#### ุญุงูุงุช ุฌุฏูุฏุฉ:
- `pending_payment_proof` - ุจุงูุชุธุงุฑ ุฑูุน ุฅุซุจุงุช ุงูุฏูุน
- `pending_verification` - ุจุงูุชุธุงุฑ ุงูุชุญูู ูู ุงูุฏูุน
- `suspended` - ูุนูู ูุนุฏู ุงูุฏูุน

### ุฌุฏูู ุฌุฏูุฏ: `payment_transactions`

ุณุฌู ูุงูู ูุฌููุน ุงููุนุงููุงุช ุงููุงููุฉ:
- ูุนูููุงุช ุงููุนุงููุฉ (ููุนุ ูุจูุบุ ุทุฑููุฉ)
- ุฅุซุจุงุช ุงูุฏูุน
- ุญุงูุฉ ุงูุชุญูู
- ุจูุงูุงุช ุงูุฏุงูุน ูุงููุณุชูู
- ููุงุญุธุงุช

---

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### 1. ุฅูุดุงุก ุงูุนูุฏ
```
ุงูุนููู ูููุน ุงูุนูุฏ
โ
ุญุงูุฉ: pending_payment_proof
```

### 2. ุฑูุน ุฅุซุจุงุช ุงูุฏูุน
```
ุงูุนููู ูุฑูุน ุตูุฑุฉ ุงูุชุญููู
โ
ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน (InstaPay/Vodafone/ุจููู)
โ
ุญุงูุฉ: pending_verification
โ
ุฅุดุนุงุฑ ููุฑู ูููุณุคูููู
```

### 3. ุงูุชุญูู ูู ุงูุฏูุน
```
ุงููุณุคูู ูุฑุงุฌุน ุงูุตูุฑุฉ
โ
ูุชุญูู ูู: ุงููุจูุบุ ุงูุชุงุฑูุฎุ ุฑูู ุงูุนูููุฉ
โ
ูุฑุงุฑ: ููุงููุฉ ุฃู ุฑูุถ
```

### 4. ุงูููุงููุฉ
```
ุญุงูุฉ: active
โ
ุชูุนูู ุงูุนูุฏ
โ
ุญุณุงุจ ุนูููุฉ ุงูุดุฑูู ุชููุงุฆูุงู
โ
ุฅุดุนุงุฑุงุช ููุนููู ูุงูุดุฑูู
โ
ุจุฏุก ุงูุนูู
```

### 5. ุงูุฑูุถ
```
ุญุงูุฉ: pending_payment_proof
โ
ุฅุฒุงูุฉ ุงูุตูุฑุฉ ุงููุฑููุถุฉ
โ
ุฅุดุนุงุฑ ููุนููู ูุน ุงูุณุจุจ
โ
ุทูุจ ุฑูุน ุฅุซุจุงุช ุตุญูุญ
```

---

## ๐จ ุงูููููุงุช (Components)

### ููุนููู:
**`PaymentProofUpload`**
- ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน
- ุฑูุน ุตูุฑุฉ ูุงุถุญุฉ
- ูุนุงููุฉ ูุจู ุงูุฑูุน
- ุฅุถุงูุฉ ููุงุญุธุงุช
- ุชูุจููุงุช ูุงููููุฉ

### ูููุณุคูู:
**`PaymentProofVerification`**
- ุนุฑุถ ูุนูููุงุช ุงูุนูุฏ ูุงููุฉ
- ุนุฑุถ ุงูุตูุฑุฉ ุจุญุฌู ูุจูุฑ
- ููุงุท ุงูุชุญูู
- ููุงููุฉ ุฃู ุฑูุถ ูุน ููุงุญุธุงุช
- ุญุณุงุจ ุนูููุฉ ุงูุดุฑูู ุชููุงุฆูุงู

---

## ๐ API Endpoints

### `/api/upload-payment-proof` (POST)
ุฑูุน ุฅุซุจุงุช ุงูุฏูุน ูู ุงูุนููู

**ุงููุฏุฎูุงุช:**
- `file` - ุตูุฑุฉ ุฅุซุจุงุช ุงูุฏูุน
- `contractId` - ูุนุฑู ุงูุนูุฏ
- `paymentMethod` - ุทุฑููุฉ ุงูุฏูุน
- `notes` - ููุงุญุธุงุช

**ุงููุฎุฑุฌุงุช:**
- ุฑุงุจุท ุงูุตูุฑุฉ
- ุชุญุฏูุซ ุญุงูุฉ ุงูุนูุฏ
- ุฅูุดุงุก ุณุฌู ูุนุงููุฉ
- ุฅุดุนุงุฑ ูููุณุคูููู

### `/api/verify-payment-proof` (POST)
ุงูุชุญูู ูู ุฅุซุจุงุช ุงูุฏูุน (ูุณุคูููู ููุท)

**ุงููุฏุฎูุงุช:**
- `contractId` - ูุนุฑู ุงูุนูุฏ
- `action` - approve/reject
- `notes` - ููุงุญุธุงุช ุงูุชุญูู

**ุงููุฎุฑุฌุงุช:**
- ุชุญุฏูุซ ุญุงูุฉ ุงูุนูุฏ
- ุชุญุฏูุซ ุญุงูุฉ ุงููุนุงููุฉ
- ุญุณุงุจ ุนูููุฉ ุงูุดุฑูู
- ุฅุดุนุงุฑุงุช ูุฌููุน ุงูุฃุทุฑุงู

---

## โ๏ธ ุงูุนูุฏ ุงููุงูููู

### `contract-terms-template.ts`

ุนูุฏ ุดุงูู ูุญูู ุฌููุน ุงูุฃุทุฑุงู ููุชุถูู:

#### ููุนููู:
- ุถูุงู ุงูุฌูุฏุฉ ูุงูุชุณููู
- ุญููู ุงูููููุฉ ุงูููุฑูุฉ
- ุดุฑูุท ุงูุฅูุบุงุก ูุงูุงุณุชุฑุฏุงุฏ
- ุงูุฏุนู ุงูููู ูุงูุถูุงู
- ุญูุงูุฉ ุงูุจูุงูุงุช

#### ููุดุฑูุฉ:
- ุถูุงู ุงูุฏูุน ูุจู ุงูุจุฏุก
- ุญููู ุงูููููุฉ ุญุชู ุงูุณุฏุงุฏ ุงููุงูู
- ุญู ุฅููุงู ุงูุนูู ุนูุฏ ุงูุชุฃุฎูุฑ
- ุญู ุงุชุฎุงุฐ ุฅุฌุฑุงุกุงุช ูุงููููุฉ
- ุญุฏูุฏ ุงููุณุคูููุฉ

#### ููุดุฑูู:
- ูุณุจุฉ ุนูููุฉ ูุญุฏุฏุฉ
- ููุนุฏ ุฏูุน ูุงุถุญ (7 ุฃูุงู)
- ุฅุซุจุงุช ุฏูุน ุงูุนูููุฉ
- ุดุฑูุท ุงุณุชุญูุงู ุงูุนูููุฉ
- ุญู ุงููุชุงุจุนุฉ ูุงูุงุนุชุฑุงุถ

---

## ๐ ุงูุฃูุงู ูุงูุญูุงูุฉ

### ุงูุชุญูู ูู ุงููููุฉ:
- ุตูุฑ ุจุทุงูุงุช ุงููููุฉ ูุฌููุน ุงูุฃุทุฑุงู
- ุงูุชูููุน ุงูุฅููุชุฑููู
- ุจูุงูุงุช ููุซูุฉ

### ุฅุซุจุงุช ุงูุฏูุน:
- ุตูุฑ ูุงุถุญุฉ ููุชุญูููุงุช
- ุงูุชุญูู ุงููุฏูู ูู ุงููุณุคูู
- ุณุฌู ูุงูู ูููุนุงููุงุช
- ุฃุฑุดูุฉ ุฌููุน ุงูุฅุซุจุงุชุงุช

### ุงูุญูุงูุฉ ุงููุงููููุฉ:
- ุนูุฏ ููุฒู ูุงููููุงู
- ุจููุฏ ูุงุถุญุฉ ูููุตูุฉ
- ุชูุจููุงุช ูุงููููุฉ
- ุญู ุงููุฒุงุนุงุช ุจุงูุชุญููู

---

## ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ุนูุฏ ุฑูุน ุฅุซุจุงุช ุงูุฏูุน:
- โ ุฅุดุนุงุฑ ููุฑู ูููุณุคูููู
- ๐ง ุจุฑูุฏ ุฅููุชุฑููู (ุงุฎุชูุงุฑู)

### ุนูุฏ ุงูููุงููุฉ:
- โ ุฅุดุนุงุฑ ููุนููู ุจุชูุนูู ุงูุนูุฏ
- ๐ฐ ุฅุดุนุงุฑ ููุดุฑูู ุจุชุฃููุฏ ุงูุนูููุฉ

### ุนูุฏ ุงูุฑูุถ:
- โ ุฅุดุนุงุฑ ููุนููู ูุน ุงูุณุจุจ
- ๐ ุทูุจ ุฑูุน ุฅุซุจุงุช ุตุญูุญ

---

## ๐ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

### View: `contract_payment_status`
ุนุฑุถ ุดุงูู ูุญุงูุฉ ุงูุฏูุนุงุช:
- ุฅุฌูุงูู ุงููุจูุบ
- ุงููุจูุบ ุงููุฏููุน
- ุงููุจูุบ ุงููุชุจูู
- ุญุงูุฉ ุงูุชุญูู
- ุนูููุฉ ุงูุดุฑูู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูู ุตูุญุฉ ุงูุนูุฏ ููุนููู:
```tsx
import { PaymentProofUpload } from "@/components/contract/payment-proof-upload"

<PaymentProofUpload
  contractId={contract.id}
  contractNumber={contract.contract_number}
  depositAmount={contract.deposit_amount}
  onUploadComplete={() => router.refresh()}
/>
```

### 2. ูู ููุญุฉ ุงููุณุคูู:
```tsx
import { PaymentProofVerification } from "@/components/admin/payment-proof-verification"

<PaymentProofVerification
  contractId={contract.id}
  contractNumber={contract.contract_number}
  paymentProofUrl={contract.payment_proof_url}
  paymentMethod={contract.payment_proof_method}
  depositAmount={contract.deposit_amount}
  uploadedAt={contract.payment_proof_uploaded_at}
  clientName={contract.client_name}
  affiliateName={contract.affiliate_name}
  affiliateCommission={contract.affiliate_commission_amount}
  onVerificationComplete={() => router.refresh()}
/>
```

### 3. ูู ูุงูุจ ุงูุนูุฏ:
```tsx
import { generateContractTerms } from "@/lib/contract-terms-template"

const terms = generateContractTerms({
  contractNumber: "CON-2025-001",
  date: new Date().toISOString(),
  client: { /* ุจูุงูุงุช ุงูุนููู */ },
  company: { /* ุจูุงูุงุช ุงูุดุฑูุฉ */ },
  affiliate: { /* ุจูุงูุงุช ุงูุดุฑูู */ },
  service: { /* ุชูุงุตูู ุงูุฎุฏูุฉ */ },
  payment: { /* ุชูุงุตูู ุงูุฏูุน */ }
})
```

---

## โ ุงูููุงุฆุฏ

### ููุนููู:
- ๐ก๏ธ ุญูุงูุฉ ูุงููููุฉ ูุงููุฉ
- ๐ ุนูุฏ ูุงุถุญ ูููุตู
- โ๏ธ ุญููู ูุญููุธุฉ
- ๐ฏ ุฎุฏูุฉ ูุถูููุฉ

### ููุดุฑูุฉ:
- ๐ฐ ุฏูุน ูุถููู ูุจู ุงูุจุฏุก
- ๐ธ ุฅุซุจุงุช ููุซู
- โก ุชูุนูู ุชููุงุฆู ุจุนุฏ ุงูุชุญูู
- ๐ ุญูุงูุฉ ูู ุงูุงุญุชูุงู

### ููุดุฑูู:
- ๐ต ุนูููุฉ ูุญุณูุจุฉ ุชููุงุฆูุงู
- ๐ ูุชุงุจุนุฉ ุดูุงูุฉ
- โฐ ููุนุฏ ุฏูุน ูุญุฏุฏ
- ๐ ุฅุซุจุงุช ุฏูุน ููุซู

---

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุงูุชุญูู ุงูุณุฑูุน**: ุฑุงุฌุน ุฅุซุจุงุช ุงูุฏูุน ุฎูุงู 24 ุณุงุนุฉ
2. **ุงูุชูุงุตู ุงููุงุถุญ**: ุงุดุฑุญ ุณุจุจ ุงูุฑูุถ ุจูุถูุญ
3. **ุงูุฃุฑุดูุฉ**: ุงุญุชูุธ ุจุฌููุน ุงูุฅุซุจุงุชุงุช
4. **ุงูุดูุงููุฉ**: ุฃุทูุน ุฌููุน ุงูุฃุทุฑุงู ุนูู ุงูุญุงูุฉ
5. **ุงูุงุญุชุฑุงููุฉ**: ุชุนุงูู ุจููููุฉ ูุน ุฌููุน ุงูุฃุทุฑุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

โ๏ธ **ุชูุจููุงุช:**
- ูุง ูุจุฏุฃ ุงูุนูู ูุจู ุงูุชุญูู ูู ุงูุฏูุน
- ุฅุซุจุงุช ุงูุฏูุน ุงููุฒูุฑ ุฌุฑููุฉ ูุงููููุฉ
- ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ููุคุฑุดูุฉ
- ุงูุนูุฏ ููุฒู ูุงูููุงู ูุฌููุน ุงูุฃุทุฑุงู

โจ **ูููุฒุงุช:**
- ูุธุงู ุขูู ุจุงููุงูู
- ุญุณุงุจ ุชููุงุฆู ููุนูููุงุช
- ุฅุดุนุงุฑุงุช ููุฑูุฉ
- ุณุฌู ูุงูู ูููุนุงููุงุช

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** Roboweb Development Team  
**ุงูุชุงุฑูุฎ:** 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0.0

ยฉ 2025 Roboweb - ุฌููุน ุงูุญููู ูุญููุธุฉ
