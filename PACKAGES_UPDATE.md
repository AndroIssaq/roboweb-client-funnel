# تحديث الباقات والعملة - Roboweb

## نظرة عامة
تم تحديث شامل لنظام الباقات والعقود في جميع أدوار النظام (Admin, Client, Affiliate)

---

## التغييرات الرئيسية

### 1. العملة 💰
- **قبل:** الريال السعودي (ر.س)
- **بعد:** الجنيه المصري (ج.م)
- **التنسيق:** `ar-EG` بدلاً من `ar-SA`

### 2. الباقات الجديدة 📦

#### باقة البورتفوليو
- **السعر:** 18,000 ج.م
- **الدفعة المقدمة:** 9,000 ج.م (50% مقفول)
- **المبلغ المتبقي:** 9,000 ج.م
- **المميزات:** 15+ ميزة شاملة SEO فوق 90%

#### باقة المتجر الإلكتروني
- **السعر:** 35,000 ج.م
- **الدفعة المقدمة:** 17,500 ج.م (50% مقفول)
- **المبلغ المتبقي:** 17,500 ج.م
- **المميزات:** 22+ ميزة شاملة SEO فوق 95%

### 3. الدفعة المقدمة المقفولة 🔒
- **النسبة الثابتة:** 50% من سعر الباقة
- **غير قابلة للتعديل:** ✅
- **غير قابلة للاسترجاع:** ✅ بعد بدء العمل
- **معروضة بوضوح:** في جميع النماذج والعقود

---

## الملفات المحدثة

### ملفات البيانات الأساسية
1. ✅ `lib/data/packages.ts` - تعريف الباقات الكاملة
2. ✅ `lib/data/contract-terms.ts` - شروط العقود (20+ شرط لكل باقة)

### ملفات PDF
3. ✅ `lib/pdf/contract-pdfmake.ts` - العملة + بند الدفعة المقفول

### نماذج إنشاء العقود
4. ✅ `components/contract/contract-form.tsx` - Admin Form
5. ✅ `components/affiliate/affiliate-contract-form.tsx` - Affiliate Form

### عرض العقود
6. ✅ `components/contracts/contract-viewer.tsx` - عرض العقد مع الطباعة
7. ✅ `components/contract/contract-preview.tsx` - معاينة العقد
8. ✅ `components/affiliate/affiliate-contracts-table.tsx` - جدول عقود الشريك

### عرض الباقات
9. ✅ `components/packages/package-card.tsx` - كارد الباقة
10. ✅ `components/packages/packages-list.tsx` - قائمة الباقات

### التنسيق
11. ✅ `app/globals.css` - CSS للطباعة

---

## المميزات الجديدة

### في PDF العقد
- ✅ بند مقفول بلون مميز (أصفر)
- ✅ تنبيهات باللون الأحمر
- ✅ أرقام عربية
- ✅ مسافات محسّنة
- ✅ نص عربي مقلوب بشكل صحيح

### في النماذج
- ✅ الدفعة المقدمة غير قابلة للتعديل (readonly)
- ✅ Badge تحذيري أحمر
- ✅ رسالة تنبيه واضحة
- ✅ اختيار الباقات من المصدر الموحد

### في عرض العقود
- ✅ عرض العملة بالجنيه المصري
- ✅ توضيح "50% مقفول"
- ✅ أزرار طباعة مخصصة للأدوار الثلاثة

---

## طرق الدفع المحدثة
- تحويل بنكي
- فودافون كاش
- فوري
- instapay
- نقداً

---

## الشروط القياسية

### باقة البورتفوليو (20 شرط)
- التسليم خلال 21 يوم
- دعم فني 3 أشهر
- تحديثات 6 أشهر
- استضافة ودومين مجاني سنة

### باقة المتجر الإلكتروني (25 شرط)
- التسليم خلال 30 يوم
- دعم فني 6 أشهر
- تحديثات سنة كاملة
- استضافة ودومين مجاني سنة
- تكامل بوابات الدفع

---

## كيفية الاستخدام

### استيراد الباقات
\`\`\`typescript
import { getAllPackages, getPackageById } from '@/lib/data/packages'

const packages = getAllPackages()
const portfolioPackage = getPackageById('portfolio')
\`\`\`

### استيراد الشروط
\`\`\`typescript
import { getPackageTerms } from '@/lib/data/contract-terms'

const terms = getPackageTerms('ecommerce')
\`\`\`

### تنسيق العملة
\`\`\`typescript
const price = 18000
console.log(price.toLocaleString('ar-EG')) // ١٨٬٠٠٠
console.log(`${price.toLocaleString('ar-EG')} ج.م`) // ١٨٬٠٠٠ ج.م
\`\`\`

---

## الأدوار المحدثة

### 👨‍💼 Admin (المسؤول)
- ✅ إنشاء عقود بالباقات الجديدة
- ✅ عرض الأسعار بالجنيه المصري
- ✅ طباعة نسخة المسؤول

### 👤 Client (العميل)
- ✅ عرض تفاصيل العقد بالجنيه
- ✅ التوقيع على العقد
- ✅ طباعة نسخة العميل

### 🤝 Affiliate (الشريك)
- ✅ إنشاء عقود للعملاء
- ✅ الباقات والأسعار محدثة
- ✅ الدفعة المقدمة مقفولة
- ✅ طباعة نسخة الشريك

---

## التحقق من التحديثات

### 1. اختبر إنشاء عقد جديد
- افتح نموذج إنشاء العقد
- اختر باقة
- تحقق من ظهور الأسعار بالجنيه المصري
- تحقق من أن الدفعة المقدمة readonly

### 2. اختبر عرض العقد
- افتح عقد موجود
- تحقق من العملة
- تحقق من أزرار الطباعة
- اطبع العقد وتحقق من التنسيق

### 3. اختبر PDF
- حمّل PDF لعقد
- تحقق من البند المقفول (الصندوق الأصفر)
- تحقق من النص العربي
- تحقق من الأرقام العربية

---

## ملاحظات مهمة

⚠️ **الدفعة المقدمة:**
- مقفولة على 50% دائماً
- لا يمكن تعديلها في أي نموذج
- غير قابلة للاسترجاع بعد بدء العمل

✨ **المميزات المضافة:**
- استضافة مجانية سنة كاملة
- دومين مجاني سنة كاملة
- SEO احترافي (90%+ للبورتفوليو، 95%+ للمتجر)
- دعم فني متواصل
- تدريب مجاني

📱 **التوافق:**
- جميع التغييرات متوافقة مع الهواتف
- التصميم responsive
- الطباعة محسّنة

---

## الدعم الفني

إذا واجهت أي مشكلة:
1. تحقق من أن كل الملفات محدثة
2. امسح cache المتصفح (Ctrl+F5)
3. تحقق من console للأخطاء
4. راجع هذا الملف للتوثيق

---

**آخر تحديث:** 14 أكتوبر 2025  
**النسخة:** 2.0.0  
**الحالة:** ✅ جاهز للإنتاج
